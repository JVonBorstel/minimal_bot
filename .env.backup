# ==============================================================================
# Light-MVP ChatOps Bot - Environment Variables
# ==============================================================================

# --- Core Application Settings ---
APP_ENV="development"
PORT="8501"
APP_BASE_URL="http://localhost:8501"
LOG_LEVEL="DEBUG"

# --- Bot Framework & Teams Core Configuration ---
MICROSOFT_APP_ID="ddefbb36-1d7e-4d4f-9497-795a4200b6db"
MICROSOFT_APP_PASSWORD="yXX8Q~U1vZEaY.rmDai_jYPnB5YI2d.MVCxiqbJq"
MICROSOFT_APP_TYPE="MultiTenant"
TEAMS_APP_ID="ddefbb36-1d7e-4d4f-9497-795a4200b6db"
TEAMS_APP_TENANT_ID="622ba96e-11ac-4f5e-8d0d-68b007282a9a"
TEAMS_DEFAULT_LOCALE="en-US"
TEAMS_MANIFEST_VERSION="1.13"
TEAMS_BOT_ENDPOINT="http://localhost:8501/api/messages"

# --- Bot API Endpoints ---
BOT_API_MESSAGES_ENDPOINT="/api/messages"
BOT_API_HEALTHCHECK_ENDPOINT="/api/healthz"
BOT_API_WEBHOOK_ENDPOINT="/api/webhooks/"

# --- LLM Configuration ---
GEMINI_API_KEY="AIzaSyAWnob7XwQCwBoHvvfctdRNkEzJsaKtlJs"
GEMINI_MODEL="models/gemini-2.0-flash"

# --- Tool Configuration: GitHub ---
GITHUB_ACCOUNT_1_NAME="personal"
GITHUB_ACCOUNT_1_TOKEN="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"
GITHUB_DEFAULT_ACCOUNT_NAME="personal"
GITHUB_DEFAULT_REPO="JVonBorstel/AugieAI-ChatOps"
GITHUB_WEBHOOK_SECRET=""

# --- Tool Configuration: Jira ---
JIRA_API_URL="https://take3tech.atlassian.net/
JIRA_API_EMAIL="jvonborstel@take3tech.com"
JIRA_API_TOKEN="ATATT3xFfGF00pAvJ_LNKpLZRyy8xZkChjpJC__y0LZGTDK2jKUJlU-P9wQS-_EshZHMGpAnMJl4oEQP9MuvwEWSmtljGg8oSLbjqSt7o48ydXz4ZCgT-8GvexV7fV_tczrZPOpocCCkSvg6HUtGXZ_0tXrqQ5niJ6p5pMVjnPSCjNbN7oRwzqU=78EAEEC9"
JIRA_DEFAULT_TICKET_KEY="LM-13048"
JIRA_DEFAULT_PROJECT_KEY="PROJ"
JIRA_DEFAULT_ISSUE_TYPE="Story"

# --- Tool Configuration: Greptile ---
GREPTILE_API_KEY="B+xiuzhwiHkqmuLbAL9yzgGsQnCRLtwagVGrgdeiyz28q4M5"
GREPTILE_API_URL="https://api.greptile.com/v2"
GREPTILE_DEFAULT_REPO="https://github.com/takethree/loanmaps"

# --- Tool Configuration: Perplexity ---
PERPLEXITY_API_KEY="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"
PERPLEXITY_API_URL="https://api.perplexity.ai"
PERPLEXITY_MODEL="sonar-pro"

# --- Tool Configuration: Octopus ---
OCTOPUS_API_KEY=""
OCTOPUS_SERVER=""
OCTOPUS_DEFAULT_SPACE_NAME="Default"
OCTOPUS_DEFAULT_PROJECT_NAME=""
OCTOPUS_DEFAULT_ENVIRONMENT_NAME="Production"
OCTOPUS_WEBHOOK_SECRET=""

# --- Microsoft Graph API & Azure AD Settings ---
AZURE_TENANT_ID="622ba96e-11ac-4f5e-8d0d-68b007282a9a"
AZURE_CLIENT_ID="ddefbb36-1d7e-4d4f-9497-795a4200b6db"
AZURE_CLIENT_SECRET="h3T8Q~kQvm2~BJagyrCy3ERAiWLrMBMVLfh6EcBb"
GRAPH_SCOPES="User.Read.All,Group.ReadWrite.All,Team.ReadWrite.All,Channel.ReadWrite.All,Chat.ReadWrite.All"

# --- Redis Configuration ---
#REDIS_URL="redis://172.24.184.201:6379/0"
#REDIS_HOST="172.24.184.201"
#REDIS_PORT="6379"
#REDIS_PASSWORD=""
#REDIS_DB="0"
#REDIS_SSL_ENABLED="false"
#MEMORY_TYPE="redis"

# --- Azure Storage & Microsoft 365 Integration ---
AZURE_STORAGE_CONNECTION_STRING=""
SHAREPOINT_SITE_URL=""
APPLICATIONINSIGHTS_CONNECTION_STRING=""

# --- Logging Configuration ---
LOG_AUDIT_FILE="logs/audit.log"
LOG_SENSITIVE_FIELDS="password,token,secret,key,query,messages,body,comment_body,comment_text,title,user_email,image_url,jql,inputs,field_value"
LOG_MAX_SIZE="10485760"
LOG_BACKUP_COUNT="5"

# --- Teams Feature Configuration ---
TEAMS_ENABLE_MESSAGE_EXTENSIONS="true"
TEAMS_ENABLE_TASK_MODULES="true"
TEAMS_ENABLE_TABS="true"
TEAMS_ENABLE_SSO="true"
TEAMS_ENABLE_FILE_UPLOAD="true"
TEAMS_ENABLE_MEETING_INTEGRATION="true"
TEAMS_DEFAULT_CHANNEL_CONFIG='{"welcomeMessage": true, "fileSharing": true, "membershipType": "standard"}'
TEAMS_NOTIFICATION_CHANNEL=""

# --- Security Settings ---
SECURITY_RBAC_ENABLED="false"
SECURITY_RBAC_DEPLOY_GROUPS=""
SECURITY_RBAC_ADMIN_GROUPS=""
SECURITY_TOOL_PERMISSIONS="{}"
SECURITY_MAX_UPLOAD_SIZE="10000000"
SECURITY_ALLOWED_FILE_TYPES='[".txt", ".pdf", ".doc", ".docx", ".xls", ".xlsx", ".png", ".jpg", ".jpeg", ".json", ".yaml", ".yml"]'
SECURITY_ALLOWED_ORIGINS='["http://localhost:3000"]'

# --- Rate Limiting ---
RATE_LIMIT_USER_DEFAULT="100/minute"
RATE_LIMIT_IP_DEFAULT="500/minute"
RATE_LIMIT_DEPLOYMENT="5/minute"
RATE_LIMIT_PERPLEXITY="30/minute"
RATE_LIMIT_TEAMS_API="600/minute"
RATE_LIMIT_USER="1000/minute"
RATE_LIMIT_IP="2000/minute"
RATE_LIMIT_DEPLOYMENT_API="10/minute"
RATE_LIMIT_SEARCH="30/minute"

# --- Agent Behavior Settings ---
# SYSTEM_PROMPT="You are Augie, a highly capable and proactive ChatOps assistant designed to help development teams. Your primary goal is to understand user requests, plan execution steps, and leverage your available tools to accomplish tasks efficiently and accurately. You have tools for GitHub, Jira, Code Analysis (Greptile), and Web Search (Perplexity).\n\nKey Instructions:\n1.  **Deconstruct Requests:** Break down complex user requests into logical steps.\n2.  **Plan Tool Use:** Explicitly outline which tools you will use and in what order *before* executing them, especially for multi-step tasks.\n3.  **Proactive Clarification:** If a request is ambiguous or lacks necessary details (e.g., missing repository name, issue key, specific search terms), ask targeted clarifying questions *before* proceeding.\n4.  **Precise Execution:** Call tools with accurate and complete arguments derived from the user request and conversation context.\n5.  **Synthesize Results:** Combine information from multiple tool calls or context to provide comprehensive answers.\n6.  **Error Handling:** If a tool fails, report the error clearly, explain the potential cause, and suggest how the user might correct their request or if there's a system issue.\n7.  **Contextual Awareness:** Remember previous interactions in the current conversation to inform subsequent actions and responses.\n8.  **Efficiency & Nuance:** Provide concise yet complete information, highlighting important details or potential edge cases.\nThink step-by-step and validate your plan before acting."
MAX_CONSECUTIVE_TOOL_CALLS="5"
DEFAULT_API_TIMEOUT_SECONDS="90"
DEFAULT_API_MAX_RETRIES="2"
BREAK_ON_CRITICAL_TOOL_ERROR="true"
LLM_MAX_HISTORY_ITEMS="50"
DEFAULT_USER_TIMEZONE="UTC"
ALLOWED_TECH_STACK=""
OUTLOOK_INTEGRATION_ENABLED="false"
MOCK_MODE="false"

STATE_DB_PATH=state.sqlite

